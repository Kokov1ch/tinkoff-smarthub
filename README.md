# Tinkoff SmartHub

Решение тестового задания второго этапа отбора для академии бэкенда python Tinkoff 2023

## Описание задачи

В рамках одного файла реалиизовать функционал умного дома. Умный дом состоит из конечного набора некоторых устройств, а именно:

* SmartHub
* EnvSensor (датчик характеристик окружающей среды)
* Switch (переключатель)
* Lamp (лампа)
* Socket (розетка)
* Clock (таймер)

## Этапы работы

### 1. Реализовать отправку готовых пакетов на сервер

Научиться подключаться к серверу и выполнять POST запросы, передавая уже закодированые сообщения. Пакет представляет собой байтовую строку, закодированную в base64. Подбробнее о сервере и формате пакетов можно узнать [тут](https://github.com/blackav/smart-home-binary)

### 2. Реализовать кодирование и декодирование URL-encoded unpadded base64.


Научиться работать с форматом URL-encoded unpadded base64 для отправки на сервер и приёма данных от сервера.


### 3. Реализовать кодирование и декодирование во внутреннее представление

Научииться кодировать и декодировать пакеты из бинарной формы в собственное внутреннее представление.

### 4. Реализовать следующий набор команд

* WHOISHERE — отправляется устройством, желающим обнаружить своих соседей в сети.
* IAMHERE — отправляется устройством, получившим команду WHOISHERE, и содержит информацию о самом устройстве.
* GETSTATUS — отправляется хабом какомулибо устройству для чтения состояния устройства
* STATUS — отправляется устройством хабу и как ответ на запросы GETSTATUS, SETSTATUS, и самостоятельно при изменении состояния устройства.
* SETSTATUS — отправляется хабом какомулибо устройству, чтобы устройство изменило свое состояние, например, чтобы включилась лампа. 
* TICK — тик таймера, отправляется таймером.

### 5. Выявлять структуру сети

При помощи отправки команды WHOISHERE научиться сканировать устройства, находящиеся на модельном сервере

### 6. Реализовать работу со всеми необходимыми устройствами

Научиться моделировать работу всех возможных сценариев

## Особенности
* Исходный код должен располагаться строго в одном файле.
* Запуск осуществляется через командную строку. В качестве аргументов передаётся URL, который нужно использовать для обмена данными с сетью, и 14-битный адрес вашего устройства-хаба в сети в шестнадцатеричном виде.<br>
Пример:
```sh
python main.py localhost:9999 ef0
```
* В случае, когда передача пакетов с сервера окончена, работа завершится с кодом 0.
* Если при взаимодействии с сервером возникла какая-либо ошибка на уровне сети или протокола HTTP, или сервер вернул код ответа, отличный от 200 или 204, работа завершится с кодом 99.

